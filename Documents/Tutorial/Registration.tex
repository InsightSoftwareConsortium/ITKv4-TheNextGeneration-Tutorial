\section{Registration}

{
\setbeamertemplate{background}{}
\setbeamertemplate{navigation symbols}{}
\setbeamercolor{background canvas}{bg={black}}
\color{white}
\begin{frame}[plain]
\fontsize{36pt}{36pt}\selectfont
\center
\begin{center}
Refactored Registration Framework
\end{center}

\fontsize{12pt}{12pt}\selectfont
\begin{center}
Insight Software Consortium
\end{center}
\vskip12pt
\begin{center}
 PICSL @ University of Pennsylvania 
\end{center}
\vskip12pt
\begin{center}
 Brian Avants, Nicholas Tustison, Gang Song, \\ 
Baohua Wu, Michael Stauffer, James C. Gee
\end{center}
\end{frame}
}

\subsection{Introduction}

\begin{frame}
\frametitle{What is registration?}
\includegraphics[height=2in]{../Art/RegistrationBasquiatWarp.pdf}
\end{frame}

\begin{frame}
\frametitle{What is registration?}
\includegraphics[height=1.8in]{../Art/RegistrationBasquiatDeWarp.pdf}
\vskip20pt
\begin{displaymath}
\| I ( x ) - J(\phi(x)) \|^2  + R(\phi( x))
\end{displaymath}
\end{frame}

 \centeredlargetext{white}{black}{
ITK v3 framework
\vskip20pt
\includegraphics[height=2.2in]{../Art/itkv3reg}
 }

 \centeredlargetext{white}{black}{
ITK v4 framework
\vskip20pt
\includegraphics[height=2.2in]{../Art/itkv4reg}
 }

\begin{frame}[fragile]
\frametitle{Exercise 1: Look at options for a registration program}
\begin{verbatim}
~/bin/ANTS/bin/antsRegistration --help | less
\end{verbatim}
\end{frame}

\begin{frame}
\frametitle{Composite transformations}
\includegraphics[height=2.5in]{../Art/composite}
\end{frame}

\subsection{Refactoring overview}

\begin{frame}
\frametitle{Image Registration Refactoring}
\Large
\begin{itemize}
\item Transform operations for vectors \&  tensors
\pause
\item Unbiased registration
\pause
\item Multi-threading throughout the metrics
\pause 
\item Automated parameter scaling
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Unified framework}
\Large
\begin{itemize}
\item Local \& global transforms treated the same in resampler
\pause 
\item Both types available to (revised) optimizers
\pause 
\item Revised metrics optimized for these operations
\end{itemize}
\end{frame}

\subsection{Exercises}
 \centeredlargetext{white}{black}{
\centering Example Registration
}

\begin{frame}[fragile]
\frametitle{Exercise 2: Perform a simple registration}
\begin{verbatim}
gedit ~/Documents/ITKv4-TheNextGeneration-Tutorial/\
Exercises/Registration/RegistrationExercises.cxx &

cd ~/bin/Documents/ITKv4-TheNextGeneration-Tutorial
make

eog ~/data/BrainProtonDensitySliceBorder20.png &
eog ~/data/BrainProtonDensitySliceR10X13Y17.png &
\end{verbatim}
\end{frame}

\begin{frame}[fragile]
\frametitle{Exercise 2: Perform a simple registration}
\begin{verbatim}
./bin/RegistrationExercises ~/data/BrainProtonDensitySliceBorder20.png \
  ~/data/BrainProtonDensitySliceR10X13Y17.png \
  ./Registered.png

eog ./Registered.png
\end{verbatim}
\end{frame}

\begin{frame}[fragile]
\frametitle{Exercise 3: Do not scale the optimizer parameters}
  \begin{itemize}
    \item In \texttt{RegistrationExercises.cxx}, \textbf{line 163}, turn off
      automatic optimizer paramer scaling.
    \item What happens and why?
  \end{itemize}
\end{frame}
